---
- name: Install sddm
  become: true
  community.general.pacman:
    name: [sddm]

- name: Populate service facts
  ansible.builtin.service_facts: null

- name: Disable lightdm service
  become: true
  ansible.builtin.service:
    name: lightdm
    enabled: false
  when: "'lightdm' in services"

- name: Enable sddm service
  become: true
  ansible.builtin.service:
    name: sddm
    enabled: true
