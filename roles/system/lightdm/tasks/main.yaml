---
- name: Install lightdm
  become: true
  community.general.pacman:
    name: [lightdm-gtk-greeter, lightdm-gtk-greeter-settings]

- name: Populate service facts
  ansible.builtin.service_facts: null

- name: Disable sddm
  become: true
  ansible.builtin.service:
    name: sddm
    enabled: false
  when: "'sddm' in services"

- name: Enable lightdm service
  become: true
  ansible.builtin.service:
    enabled: true
    name: lightdm

- name: Copy lightdm configs
  become: true
  synchronize:
    archive: false
    compress: false
    dest: /etc/
    recursive: true
    src: lightdm
